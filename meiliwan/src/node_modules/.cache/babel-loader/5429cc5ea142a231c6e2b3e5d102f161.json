{"ast":null,"code":"import { createStore } from 'redux'; // 初始状态\n\nconst initState = {\n  cartlist: [{\n    \"iCheck\": true,\n    \"isPromote\": true,\n    \"iGoodsId\": \"14336\",\n    \"iTotal\": \"1\",\n    \"iCurrPrice\": 599.00,\n    \"sMallName\": \"源计划 艾瑞莉娅 中型雕塑\",\n    \"sProfileImg\": \"https://game.gtimg.cn/images/zb/x5/uploadImg/goods/202006/20200611211952_44398.jpg\"\n  }, {\n    \"iCheck\": true,\n    \"isPromote\": true,\n    \"iGoodsId\": \"13243\",\n    \"iTotal\": \"2\",\n    \"iCurrPrice\": 249.00,\n    \"sMallName\": \"柯基库奇 毛绒\",\n    \"sProfileImg\": \"https://game.gtimg.cn/images/zb/x5/uploadImg/goods/202003/20200331135548_84130.jpg\"\n  }, {\n    \"iCheck\": true,\n    \"isPromote\": true,\n    \"iGoodsId\": \"12862\",\n    \"iTotal\": \"3\",\n    \"iCurrPrice\": 419.00,\n    \"sMallName\": \"NIKE X LPL 战队IG比赛男子球衣\",\n    \"sProfileImg\": \"https://game.gtimg.cn/images/zb/x5/uploadImg/goods/202001/20200113160828_34014.jpg\"\n  }, {\n    \"iCheck\": true,\n    \"isPromote\": true,\n    \"iGoodsId\": \"12805\",\n    \"iTotal\": \"5\",\n    \"iCurrPrice\": 220.00,\n    \"sMallName\": \"约德尔人迷你手办套装\",\n    \"sProfileImg\": \"https://game.gtimg.cn/images/zb/x5/uploadImg/goods/202001/20200102120303_37392.jpg\"\n  }],\n  totalPrice: 0,\n  step: 0\n}; // 指定state的修改逻辑\n\nfunction reducer(state = initState, action) {\n  switch (action.type) {\n    // 添加商品\n    case 'add_to_cart':\n      return { ...state,\n        cartlist: [action.goods, ...state.cartlist]\n      };\n    // 删除商品\n\n    case 'remove_from_cart':\n      return { ...state,\n        cartlist: state.cartlist.filter(item => item.iGoodsId != action.iGoodsId)\n      };\n    // 修改数量\n\n    case 'change_qty':\n      {\n        console.log(action);\n        return { ...state,\n          cartlist: state.cartlist.map(item => {\n            if (item.iGoodsId == action.iGoodsId) {\n              if (item.iTotal <= 1) {\n                item.iTotal = 1;\n                console.log(\"不能再少了\");\n              } else {\n                item.iTotal = action.iTotal;\n              }\n            }\n\n            return item;\n          })\n        };\n      }\n    // 清空数量\n\n    case 'clear_cart':\n      return { ...state,\n        cartlist: []\n      };\n    // 选中商品，以及反向判断是否满足全选条件\n\n    case 'select_cart':\n      return { ...state,\n        cartlist: state.cartlist.map(item => {\n          if (item.iGoodsId == action.iGoodsId) {\n            item.iCheck = !item.iCheck;\n          }\n\n          return item;\n        })\n      };\n    // 全选按钮的效果\n\n    case 'all_select_cart':\n      return { ...state,\n        cartlist: state.cartlist.map(item => {\n          item.iCheck = action.allchoose;\n          return item;\n        })\n      };\n    // 哪个选项显示删除按钮\n\n    case 'del_select_cart':\n      return { ...state,\n        cartlist: state.cartlist.map(item => {\n          if (item.iGoodsId == action.iGoodsId) {\n            item.isPromote = !item.isPromote;\n          } else {\n            item.isPromote = true;\n          }\n\n          return item;\n        })\n      };\n\n    default:\n      return state;\n  }\n}\n\nconst store = createStore(reducer);\nexport default store; // console.log('store', store)\n// // 获取state\n// store.getState();\n// // 修改State\n// // 添加商品\n// store.dispatch({type:'add_to_cart',goods:{}})\n// // 修改商品\n// store.dispatch({ type: 'onChangeCount' })\n// // 删除商品\n// // store.dispatch({ type: 'remove_from_cart', iGoodsId })\n// // 修改数量\n// store.dispatch({ type: 'change_qty', iGoodsId:0, goods_qty:0 })","map":{"version":3,"sources":["D:/phpstudy_pro/WWW/react/xiangmu/meiliwan/src/store/index.js"],"names":["createStore","initState","cartlist","totalPrice","step","reducer","state","action","type","goods","filter","item","iGoodsId","console","log","map","iTotal","iCheck","allchoose","isPromote","store"],"mappings":"AAAA,SAASA,WAAT,QAA4B,OAA5B,C,CAEA;;AACA,MAAMC,SAAS,GAAG;AACdC,EAAAA,QAAQ,EAAE,CACN;AACI,cAAU,IADd;AAEI,iBAAa,IAFjB;AAGI,gBAAY,OAHhB;AAII,cAAU,GAJd;AAKI,kBAAc,MALlB;AAMI,iBAAa,eANjB;AAOI,mBAAe;AAPnB,GADM,EAUN;AACI,cAAU,IADd;AAEI,iBAAa,IAFjB;AAGI,gBAAY,OAHhB;AAII,cAAU,GAJd;AAKI,kBAAc,MALlB;AAMI,iBAAa,SANjB;AAOI,mBAAe;AAPnB,GAVM,EAmBN;AACI,cAAU,IADd;AAEI,iBAAa,IAFjB;AAGI,gBAAY,OAHhB;AAII,cAAU,GAJd;AAKI,kBAAc,MALlB;AAMI,iBAAa,uBANjB;AAOI,mBAAe;AAPnB,GAnBM,EA4BN;AACI,cAAU,IADd;AAEI,iBAAa,IAFjB;AAGI,gBAAY,OAHhB;AAII,cAAU,GAJd;AAKI,kBAAc,MALlB;AAMI,iBAAa,YANjB;AAOI,mBAAe;AAPnB,GA5BM,CADI;AAuCdC,EAAAA,UAAU,EAAE,CAvCE;AAwCdC,EAAAA,IAAI,EAAE;AAxCQ,CAAlB,C,CA0CA;;AACA,SAASC,OAAT,CAAiBC,KAAK,GAAGL,SAAzB,EAAoCM,MAApC,EAA4C;AACxC,UAAQA,MAAM,CAACC,IAAf;AACI;AACA,SAAK,aAAL;AACI,aAAO,EACH,GAAGF,KADA;AAEHJ,QAAAA,QAAQ,EAAE,CAACK,MAAM,CAACE,KAAR,EAAe,GAAGH,KAAK,CAACJ,QAAxB;AAFP,OAAP;AAIJ;;AACA,SAAK,kBAAL;AACI,aAAO,EACH,GAAGI,KADA;AAEHJ,QAAAA,QAAQ,EAAEI,KAAK,CAACJ,QAAN,CAAeQ,MAAf,CAAsBC,IAAI,IAAIA,IAAI,CAACC,QAAL,IAAiBL,MAAM,CAACK,QAAtD;AAFP,OAAP;AAIJ;;AACA,SAAK,YAAL;AAAmB;AACfC,QAAAA,OAAO,CAACC,GAAR,CAAYP,MAAZ;AACA,eAAO,EACH,GAAGD,KADA;AAEHJ,UAAAA,QAAQ,EAAEI,KAAK,CAACJ,QAAN,CAAea,GAAf,CAAmBJ,IAAI,IAAI;AACjC,gBAAIA,IAAI,CAACC,QAAL,IAAiBL,MAAM,CAACK,QAA5B,EAAsC;AAClC,kBAAID,IAAI,CAACK,MAAL,IAAe,CAAnB,EAAsB;AAClBL,gBAAAA,IAAI,CAACK,MAAL,GAAc,CAAd;AACAH,gBAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACH,eAHD,MAGO;AACHH,gBAAAA,IAAI,CAACK,MAAL,GAAcT,MAAM,CAACS,MAArB;AACH;AACJ;;AACD,mBAAOL,IAAP;AAEH,WAXS;AAFP,SAAP;AAeH;AACD;;AACA,SAAK,YAAL;AACI,aAAO,EACH,GAAGL,KADA;AAEHJ,QAAAA,QAAQ,EAAE;AAFP,OAAP;AAIJ;;AACA,SAAK,aAAL;AACI,aAAO,EACH,GAAGI,KADA;AAEHJ,QAAAA,QAAQ,EAAEI,KAAK,CAACJ,QAAN,CAAea,GAAf,CAAmBJ,IAAI,IAAI;AACjC,cAAIA,IAAI,CAACC,QAAL,IAAiBL,MAAM,CAACK,QAA5B,EAAsC;AAClCD,YAAAA,IAAI,CAACM,MAAL,GAAc,CAACN,IAAI,CAACM,MAApB;AACH;;AACD,iBAAON,IAAP;AAEH,SANS;AAFP,OAAP;AAUJ;;AACA,SAAK,iBAAL;AACI,aAAO,EACH,GAAGL,KADA;AAEHJ,QAAAA,QAAQ,EAAEI,KAAK,CAACJ,QAAN,CAAea,GAAf,CAAmBJ,IAAI,IAAI;AACjCA,UAAAA,IAAI,CAACM,MAAL,GAAcV,MAAM,CAACW,SAArB;AACA,iBAAOP,IAAP;AACH,SAHS;AAFP,OAAP;AAOJ;;AACA,SAAK,iBAAL;AACI,aAAO,EACH,GAAGL,KADA;AAEHJ,QAAAA,QAAQ,EAAEI,KAAK,CAACJ,QAAN,CAAea,GAAf,CAAmBJ,IAAI,IAAI;AACjC,cAAIA,IAAI,CAACC,QAAL,IAAiBL,MAAM,CAACK,QAA5B,EAAsC;AAClCD,YAAAA,IAAI,CAACQ,SAAL,GAAiB,CAACR,IAAI,CAACQ,SAAvB;AACH,WAFD,MAEO;AACHR,YAAAA,IAAI,CAACQ,SAAL,GAAiB,IAAjB;AACH;;AACD,iBAAOR,IAAP;AACH,SAPS;AAFP,OAAP;;AAWJ;AACI,aAAOL,KAAP;AAzER;AA4EH;;AACD,MAAMc,KAAK,GAAGpB,WAAW,CAACK,OAAD,CAAzB;AAEA,eAAee,KAAf,C,CAEA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA","sourcesContent":["import { createStore } from 'redux'\r\n\r\n// 初始状态\r\nconst initState = {\r\n    cartlist: [\r\n        {\r\n            \"iCheck\": true,\r\n            \"isPromote\": true,\r\n            \"iGoodsId\": \"14336\",\r\n            \"iTotal\": \"1\",\r\n            \"iCurrPrice\": 599.00,\r\n            \"sMallName\": \"源计划 艾瑞莉娅 中型雕塑\",\r\n            \"sProfileImg\": \"https://game.gtimg.cn/images/zb/x5/uploadImg/goods/202006/20200611211952_44398.jpg\"\r\n        },\r\n        {\r\n            \"iCheck\": true,\r\n            \"isPromote\": true,\r\n            \"iGoodsId\": \"13243\",\r\n            \"iTotal\": \"2\",\r\n            \"iCurrPrice\": 249.00,\r\n            \"sMallName\": \"柯基库奇 毛绒\",\r\n            \"sProfileImg\": \"https://game.gtimg.cn/images/zb/x5/uploadImg/goods/202003/20200331135548_84130.jpg\"\r\n        },\r\n        {\r\n            \"iCheck\": true,\r\n            \"isPromote\": true,\r\n            \"iGoodsId\": \"12862\",\r\n            \"iTotal\": \"3\",\r\n            \"iCurrPrice\": 419.00,\r\n            \"sMallName\": \"NIKE X LPL 战队IG比赛男子球衣\",\r\n            \"sProfileImg\": \"https://game.gtimg.cn/images/zb/x5/uploadImg/goods/202001/20200113160828_34014.jpg\"\r\n        },\r\n        {\r\n            \"iCheck\": true,\r\n            \"isPromote\": true,\r\n            \"iGoodsId\": \"12805\",\r\n            \"iTotal\": \"5\",\r\n            \"iCurrPrice\": 220.00,\r\n            \"sMallName\": \"约德尔人迷你手办套装\",\r\n            \"sProfileImg\": \"https://game.gtimg.cn/images/zb/x5/uploadImg/goods/202001/20200102120303_37392.jpg\"\r\n        }\r\n    ],\r\n    totalPrice: 0,\r\n    step: 0,\r\n}\r\n// 指定state的修改逻辑\r\nfunction reducer(state = initState, action) {\r\n    switch (action.type) {\r\n        // 添加商品\r\n        case 'add_to_cart':\r\n            return {\r\n                ...state,\r\n                cartlist: [action.goods, ...state.cartlist]\r\n            }\r\n        // 删除商品\r\n        case 'remove_from_cart':\r\n            return {\r\n                ...state,\r\n                cartlist: state.cartlist.filter(item => item.iGoodsId != action.iGoodsId)\r\n            }\r\n        // 修改数量\r\n        case 'change_qty': {\r\n            console.log(action)\r\n            return {\r\n                ...state,\r\n                cartlist: state.cartlist.map(item => {\r\n                    if (item.iGoodsId == action.iGoodsId) {\r\n                        if (item.iTotal <= 1) {\r\n                            item.iTotal = 1;\r\n                            console.log(\"不能再少了\")\r\n                        } else {\r\n                            item.iTotal = action.iTotal\r\n                        }\r\n                    }\r\n                    return item;\r\n\r\n                })\r\n            }\r\n        }\r\n        // 清空数量\r\n        case 'clear_cart':\r\n            return {\r\n                ...state,\r\n                cartlist: []\r\n            }\r\n        // 选中商品，以及反向判断是否满足全选条件\r\n        case 'select_cart':\r\n            return {\r\n                ...state,\r\n                cartlist: state.cartlist.map(item => {\r\n                    if (item.iGoodsId == action.iGoodsId) {\r\n                        item.iCheck = !item.iCheck;\r\n                    }\r\n                    return item;\r\n\r\n                }),\r\n            }\r\n        // 全选按钮的效果\r\n        case 'all_select_cart':\r\n            return {\r\n                ...state,\r\n                cartlist: state.cartlist.map(item => {\r\n                    item.iCheck = action.allchoose;\r\n                    return item;\r\n                })\r\n            }\r\n        // 哪个选项显示删除按钮\r\n        case 'del_select_cart':\r\n            return {\r\n                ...state,\r\n                cartlist: state.cartlist.map(item => {\r\n                    if (item.iGoodsId == action.iGoodsId) {\r\n                        item.isPromote = !item.isPromote\r\n                    } else {\r\n                        item.isPromote = true\r\n                    }\r\n                    return item;\r\n                })\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n\r\n}\r\nconst store = createStore(reducer);\r\n\r\nexport default store;\r\n\r\n// console.log('store', store)\r\n\r\n\r\n// // 获取state\r\n// store.getState();\r\n\r\n// // 修改State\r\n// // 添加商品\r\n// store.dispatch({type:'add_to_cart',goods:{}})\r\n// // 修改商品\r\n// store.dispatch({ type: 'onChangeCount' })\r\n// // 删除商品\r\n// // store.dispatch({ type: 'remove_from_cart', iGoodsId })\r\n\r\n// // 修改数量\r\n// store.dispatch({ type: 'change_qty', iGoodsId:0, goods_qty:0 })"]},"metadata":{},"sourceType":"module"}