{"ast":null,"code":"import { createStore } from 'redux'; // 初始状态\n\nconst initState = {\n  cartlist: [],\n  totalPrice: 0,\n  step: 0\n}; // 指定state的修改逻辑\n\nfunction reducer(state = initState, action) {\n  switch (action.type) {\n    // 添加商品\n    case 'add_to_cart':\n      return { ...state,\n        cartlist: [action.goods, ...state.cartlist]\n      };\n    // 删除商品\n\n    case 'remove_from_cart':\n      return { ...state,\n        cartlist: state.cartlist.filter(item => item.iGoodsId != action.iGoodsId)\n      };\n    // 修改数量\n\n    case 'change_qty':\n      {\n        console.log(action);\n        return { ...state,\n          cartlist: state.cartlist.map(item => {\n            if (item.iGoodsId == action.iGoodsId) {\n              item.iTotal = action.iTotal;\n            }\n\n            console.log(item);\n            return item;\n          })\n        };\n      }\n    // 清空数量\n\n    case 'clear_cart':\n      return { ...state,\n        cartlist: []\n      };\n\n    default:\n      return state;\n  }\n}\n\nconst store = createStore(reducer);\nexport default store; // console.log('store', store)\n// // 获取state\n// store.getState();\n// // 修改State\n// // 添加商品\n// store.dispatch({type:'add_to_cart',goods:{}})\n// // 修改商品\n// store.dispatch({ type: 'onChangeCount' })\n// // 删除商品\n// // store.dispatch({ type: 'remove_from_cart', iGoodsId })\n// // 修改数量\n// store.dispatch({ type: 'change_qty', iGoodsId:0, goods_qty:0 })","map":{"version":3,"sources":["D:/phpstudy_pro/WWW/react/xiangmu/meiliwan/src/store/index.js"],"names":["createStore","initState","cartlist","totalPrice","step","reducer","state","action","type","goods","filter","item","iGoodsId","console","log","map","iTotal","store"],"mappings":"AAAA,SAASA,WAAT,QAA4B,OAA5B,C,CAEA;;AACA,MAAMC,SAAS,GAAG;AACdC,EAAAA,QAAQ,EAAE,EADI;AAEdC,EAAAA,UAAU,EAAE,CAFE;AAGdC,EAAAA,IAAI,EAAE;AAHQ,CAAlB,C,CAKA;;AACA,SAASC,OAAT,CAAiBC,KAAK,GAAGL,SAAzB,EAAoCM,MAApC,EAA4C;AACxC,UAAQA,MAAM,CAACC,IAAf;AACI;AACA,SAAK,aAAL;AACI,aAAO,EACH,GAAGF,KADA;AAEHJ,QAAAA,QAAQ,EAAE,CAACK,MAAM,CAACE,KAAR,EAAe,GAAGH,KAAK,CAACJ,QAAxB;AAFP,OAAP;AAIJ;;AACA,SAAK,kBAAL;AACI,aAAO,EACH,GAAGI,KADA;AAEHJ,QAAAA,QAAQ,EAAEI,KAAK,CAACJ,QAAN,CAAeQ,MAAf,CAAsBC,IAAI,IAAIA,IAAI,CAACC,QAAL,IAAiBL,MAAM,CAACK,QAAtD;AAFP,OAAP;AAIJ;;AACA,SAAK,YAAL;AAAmB;AACfC,QAAAA,OAAO,CAACC,GAAR,CAAYP,MAAZ;AACA,eAAO,EACH,GAAGD,KADA;AAEHJ,UAAAA,QAAQ,EAAEI,KAAK,CAACJ,QAAN,CAAea,GAAf,CAAmBJ,IAAI,IAAI;AACjC,gBAAIA,IAAI,CAACC,QAAL,IAAiBL,MAAM,CAACK,QAA5B,EAAsC;AAClCD,cAAAA,IAAI,CAACK,MAAL,GAAcT,MAAM,CAACS,MAArB;AACH;;AACDH,YAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACA,mBAAOA,IAAP;AAEH,WAPS;AAFP,SAAP;AAWH;AACD;;AACA,SAAK,YAAL;AACI,aAAO,EACH,GAAGL,KADA;AAEHJ,QAAAA,QAAQ,EAAE;AAFP,OAAP;;AAIJ;AACI,aAAOI,KAAP;AAnCR;AAsCH;;AACD,MAAMW,KAAK,GAAGjB,WAAW,CAACK,OAAD,CAAzB;AAEA,eAAeY,KAAf,C,CAEA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA","sourcesContent":["import { createStore } from 'redux'\r\n\r\n// 初始状态\r\nconst initState = {\r\n    cartlist: [],\r\n    totalPrice: 0,\r\n    step: 0\r\n}\r\n// 指定state的修改逻辑\r\nfunction reducer(state = initState, action) {\r\n    switch (action.type) {\r\n        // 添加商品\r\n        case 'add_to_cart':\r\n            return {\r\n                ...state,\r\n                cartlist: [action.goods, ...state.cartlist]\r\n            }\r\n        // 删除商品\r\n        case 'remove_from_cart':\r\n            return {\r\n                ...state,\r\n                cartlist: state.cartlist.filter(item => item.iGoodsId != action.iGoodsId)\r\n            }\r\n        // 修改数量\r\n        case 'change_qty': {\r\n            console.log(action)\r\n            return {\r\n                ...state,\r\n                cartlist: state.cartlist.map(item => {\r\n                    if (item.iGoodsId == action.iGoodsId) {\r\n                        item.iTotal = action.iTotal\r\n                    }\r\n                    console.log(item)\r\n                    return item;\r\n                    \r\n                })\r\n            }\r\n        }\r\n        // 清空数量\r\n        case 'clear_cart':\r\n            return {\r\n                ...state,\r\n                cartlist: []\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n\r\n}\r\nconst store = createStore(reducer);\r\n\r\nexport default store;\r\n\r\n// console.log('store', store)\r\n\r\n\r\n// // 获取state\r\n// store.getState();\r\n\r\n// // 修改State\r\n// // 添加商品\r\n// store.dispatch({type:'add_to_cart',goods:{}})\r\n// // 修改商品\r\n// store.dispatch({ type: 'onChangeCount' })\r\n// // 删除商品\r\n// // store.dispatch({ type: 'remove_from_cart', iGoodsId })\r\n\r\n// // 修改数量\r\n// store.dispatch({ type: 'change_qty', iGoodsId:0, goods_qty:0 })"]},"metadata":{},"sourceType":"module"}