{"ast":null,"code":"import { createStore } from 'redux'; // 初始状态\n\nconst initState = {\n  goodslist: [],\n  totalPrice: 0,\n  step: 0\n}; // 指定state的修改逻辑\n\nfunction reducer(state = initState, action) {\n  switch (action.type) {\n    // 添加商品\n    case 'add_to_cart':\n      return { ...state,\n        goodslist: [action.goods, ...state.goodslist]\n      };\n    // 删除商品\n\n    case 'remove_from_cart':\n      return { ...state,\n        goodslist: state.goodslist.filter(item => item.iGoodsId != action.iGoodsId)\n      };\n    // 修改数量\n\n    case 'change_qty':\n      {\n        return { ...state,\n          goodslist: state.goodslist.map(item => {\n            if (item.iGoodsId == action.iGoodsId) {\n              item.iTotal = action.goods_qty;\n            }\n\n            return item;\n          })\n        };\n      }\n    // 清空数量\n\n    case 'clear_cart':\n      return { ...state,\n        goodslist: []\n      };\n\n    default:\n      return state;\n  }\n}\n\nconst store = createStore(reducer);\nexport default store;\nconsole.log('store', store); // 获取state\n\nstore.getState(); // 修改State\n// 添加商品\n\nstore.dispatch({\n  type: 'add_to_cart',\n  goods\n}); // 修改商品\n\nstore.dispatch({\n  type: 'onChangeCount'\n}); // 删除商品\n// store.dispatch({ type: 'remove_from_cart', iGoodsId })\n// 修改数量\n\nstore.dispatch({\n  type: 'change_qty',\n  iGoodsId: 0,\n  goods_qty: 0\n});","map":{"version":3,"sources":["D:/phpstudy_pro/WWW/react/xiangmu/meiliwan/src/store/index.js"],"names":["createStore","initState","goodslist","totalPrice","step","reducer","state","action","type","goods","filter","item","iGoodsId","map","iTotal","goods_qty","store","console","log","getState","dispatch"],"mappings":"AAAA,SAASA,WAAT,QAA4B,OAA5B,C,CAEA;;AACA,MAAMC,SAAS,GAAG;AACdC,EAAAA,SAAS,EAAE,EADG;AAEdC,EAAAA,UAAU,EAAE,CAFE;AAGdC,EAAAA,IAAI,EAAE;AAHQ,CAAlB,C,CAKA;;AACA,SAASC,OAAT,CAAiBC,KAAK,GAAGL,SAAzB,EAAoCM,MAApC,EAA4C;AACxC,UAAQA,MAAM,CAACC,IAAf;AACI;AACA,SAAK,aAAL;AACI,aAAO,EACH,GAAGF,KADA;AAEHJ,QAAAA,SAAS,EAAE,CAACK,MAAM,CAACE,KAAR,EAAe,GAAGH,KAAK,CAACJ,SAAxB;AAFR,OAAP;AAIJ;;AACA,SAAK,kBAAL;AACI,aAAO,EACH,GAAGI,KADA;AAEHJ,QAAAA,SAAS,EAAEI,KAAK,CAACJ,SAAN,CAAgBQ,MAAhB,CAAuBC,IAAI,IAAIA,IAAI,CAACC,QAAL,IAAiBL,MAAM,CAACK,QAAvD;AAFR,OAAP;AAIJ;;AACA,SAAK,YAAL;AAAmB;AACf,eAAO,EACH,GAAGN,KADA;AAEHJ,UAAAA,SAAS,EAAEI,KAAK,CAACJ,SAAN,CAAgBW,GAAhB,CAAoBF,IAAI,IAAI;AACnC,gBAAIA,IAAI,CAACC,QAAL,IAAiBL,MAAM,CAACK,QAA5B,EAAsC;AAClCD,cAAAA,IAAI,CAACG,MAAL,GAAcP,MAAM,CAACQ,SAArB;AACH;;AACD,mBAAOJ,IAAP;AACH,WALU;AAFR,SAAP;AASH;AACD;;AACA,SAAK,YAAL;AACI,aAAO,EACH,GAAGL,KADA;AAEHJ,QAAAA,SAAS,EAAE;AAFR,OAAP;;AAIJ;AACI,aAAOI,KAAP;AAhCR;AAmCH;;AACD,MAAMU,KAAK,GAAGhB,WAAW,CAACK,OAAD,CAAzB;AAEA,eAAeW,KAAf;AAEAC,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,KAArB,E,CAGA;;AACAA,KAAK,CAACG,QAAN,G,CAEA;AACA;;AACAH,KAAK,CAACI,QAAN,CAAe;AAACZ,EAAAA,IAAI,EAAC,aAAN;AAAoBC,EAAAA;AAApB,CAAf,E,CACA;;AACAO,KAAK,CAACI,QAAN,CAAe;AAAEZ,EAAAA,IAAI,EAAE;AAAR,CAAf,E,CACA;AACA;AAEA;;AACAQ,KAAK,CAACI,QAAN,CAAe;AAAEZ,EAAAA,IAAI,EAAE,YAAR;AAAsBI,EAAAA,QAAQ,EAAC,CAA/B;AAAkCG,EAAAA,SAAS,EAAC;AAA5C,CAAf","sourcesContent":["import { createStore } from 'redux'\r\n\r\n// 初始状态\r\nconst initState = {\r\n    goodslist: [],\r\n    totalPrice: 0,\r\n    step: 0\r\n}\r\n// 指定state的修改逻辑\r\nfunction reducer(state = initState, action) {\r\n    switch (action.type) {\r\n        // 添加商品\r\n        case 'add_to_cart':\r\n            return {\r\n                ...state,\r\n                goodslist: [action.goods, ...state.goodslist]\r\n            }\r\n        // 删除商品\r\n        case 'remove_from_cart':\r\n            return {\r\n                ...state,\r\n                goodslist: state.goodslist.filter(item => item.iGoodsId != action.iGoodsId)\r\n            }\r\n        // 修改数量\r\n        case 'change_qty': {\r\n            return {\r\n                ...state,\r\n                goodslist: state.goodslist.map(item => {\r\n                    if (item.iGoodsId == action.iGoodsId) {\r\n                        item.iTotal = action.goods_qty\r\n                    }\r\n                    return item;\r\n                })\r\n            }\r\n        }\r\n        // 清空数量\r\n        case 'clear_cart':\r\n            return {\r\n                ...state,\r\n                goodslist: []\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n\r\n}\r\nconst store = createStore(reducer);\r\n\r\nexport default store;\r\n\r\nconsole.log('store', store)\r\n\r\n\r\n// 获取state\r\nstore.getState();\r\n\r\n// 修改State\r\n// 添加商品\r\nstore.dispatch({type:'add_to_cart',goods})\r\n// 修改商品\r\nstore.dispatch({ type: 'onChangeCount' })\r\n// 删除商品\r\n// store.dispatch({ type: 'remove_from_cart', iGoodsId })\r\n\r\n// 修改数量\r\nstore.dispatch({ type: 'change_qty', iGoodsId:0, goods_qty:0 })"]},"metadata":{},"sourceType":"module"}